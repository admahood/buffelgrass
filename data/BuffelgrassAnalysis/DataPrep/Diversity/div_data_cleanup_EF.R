#27APR2022

setwd("C:/Users/Emily/Desktop/BuffelgrassAnalysis")

#cleaning diversity data
#same as Adam's only fixed the repeat for resurection fern and
#changed the plant walk numbers to .01 so they are smaller than the subplot low percents


library(tidyverse)

lut_species <- c("Cylindropuntia bigelovii" = "Cylindropuntia bigelovii",
                 "Eragrostis lehmanniana" = "Erogrostis lehmanniann",
                 "Cylindropuntia versicolor" = "Cylindropuntia versicolor",
                 "Allium sp." = "Allium sp",
                 "Jatropha cardiophylla" = "Jatropha caridophylla",                                             
                 "Ferocactus wislizeni"= "Ferocactus wislizeni",                                              
                 "Asteraceae sp." = "dried up annual aster",                                             
                 "Encelia farinosa" = "Encelia farinosa",
                 "Selaginella pilifera" ="Ressurection fern",                                                 
                 "Porophyllum gracile" = "porophyllum gracile",                                               
                 "Lycium sp." = "Lycium sp",                                                         
                 "Pennisetum ciliare" = "Pennisetum ciliare",                                                
                 "Cottsia gracilis" = "Cottsia gracile",                                                   
                 "Parkinsonia microphylla" = "Parkinsonia microphylla",                                           
                 "Selaginella pilifera" = "resurrection fern",                                                 
                 "Muhlenbergia porteri" = "Myhlenbergfor porteri",                                             
                 "Carnegiea gigantea"= "Larnegia gigantea",                                                 
                 "Trixis californica" = "Trixis californica",                                                
                 "Ambrosia deltoidea" = "Ambrosia deltoides",                                                
                 "Acacia greggii" = "Acacia greggii",                                                    
                 "Muhlenbergia porteri" = "Muhlenburgia porteri",                                              
                 "Lepidium densiflorum" = "Lepidium densiflorum",                                              
                 "Pennellia longifolia" = "Pennelia longifolia",                                               
                 "cf. Chenopodiaceae sp." = "Chenopodium-looking subshrub",                                      
                 "Mimosa aculetecorpa"= "Mimosa aculetecorpa",                                               
                 "Opuntia engelmannii" = "Opuntia engelmannii",
                 "Marina parryi" = "Marina (some as RR_05 & RR_10)",                                    
                 "Marina parryi" = "Marina",                                                            
                 "Erodium cicutarium" ="cf. erodium sp.",                                                   
                 "Fern sp. (2)" = "fern 2",                                                            
                 "Cryptantha sp." = "Cryptantha sp.",                                                    
                 "Carnegiea gigantea" = "Cornegia gigantea",                                                 
                 "Prosopsis velutina" = "Prosopsis velutina",                                                
                 "Hesperostipa neomexicana" = "Hesperostipa neomexicana",                                          
                 "Eragrostis lehmanniana" = "Eragrostis lehmanniana",                                            
                 "Plantago purshii" = "Plantago purshii",                                                  
                 "Ambrosia psilostachya" = "Ambrosia psilostachya",                                             
                 "Cryptantha sp. (Unk 2)" = "Unk 2 (white fluffies)",                                            
                 "cf. Descurainia sophia" = "cf Desurainia sophia",                                              
                 "Evolvulus arizonicus" = "Evolvulus arizonicus",                                              
                 "Justicia longii" = "Unk 4 - Justicia longlii",                                          
                 "Ayenia filiformis" = "Ayenia filiformis",                                                 
                 "Cryptantha sp. (Unk 2)" = "Unk 2",                                                             
                 "Justicia longii"  = "Justicia longlii",                                                  
                 "Calliandra eriophylla" = "Calliondra eriophylla",                                             
                 "Bouteloua repens" = "Bouteloua repens",                                                  
                 "Ipomoea hederacea" = "Ipomoea hederacea",                                                 
                 "Moss sp." = "Moss sp.",                                                          
                 "Poaceae sp. (Unk 21)"="Unk 21 - velvety grass",                                            
                 "Gutierrezia sarothrae" = "Gutierezia sarothrae",                                              
                 "Asteraceae sp." = "Unknown asteraceae",                                                
                 "Abutilon palmeri" = "Abutilon palmeri",                                                  
                 "Centaurea melitensis" = "Centaurea melitensis",                                              
                 "Dalea albiflora" = "Dalea cf albiflorus",                                               
                 "Phemeranthus aurantiacus" = "Phemeranthus aurantiacus",                                          
                 "Erodium cicutarium" = "cf Erodium cicutarium",                                             
                 "Mammillaria grahamii" = "Mammilaria grahamii",                                               
                 "Allium sp." = "Allium sp.",                                                        
                 "Sida abutifolia"= "Sida abutifolia",                                                   
                 "Ipomoea tenuiloba" = "Ipomoea tenuiloba",                                                 
                 "Bouteloua curtipendula" = "Bouteloua curtipendula",                                            
                 "Cirsium sp." = "Cirsium sp.",
                 "Ayenia filiformis"= "J-something from RR-1, small red flowers at axis",   
                 "Poaceae sp. (Unk 21)" = "velvety grass",                                                     
                 "Allionia incarnata" = "Allionia incarnata",                                                
                 "Erigeron sp."="dried up Erigeron sp.",                                             
                 "Fern sp." = "Fern spp.",                                                         
                 "Dalea albiflora" = "Dalea albiflora",                                                   
                 "Fern sp. (2)" = "Fern 2",                                                            
                 "cf. Phacelia sp." = "cf phacelia sp.",                                                   
                 "Bothriochloa barbinodis" = "Bathriachloa barbinodis",                                           
                 "cf. Bromus sp." = "cf Bromus sp.",                                                     
                 "Cottsia gracilis" = "Cottsia gracilis",                                                  
                 "Ipomoea hederacea" = "Unk 41 - vine, cordat lvs",                                         
                 "Ipomoea hederacea" = "Unk 41",                                                            
                 "Artemisia ludoviciana" = "Artemisia ludoviciana",                                             
                 "Pectocarya sp." = "Pectocarya sp.",                                                    
                 "Lycium sp. (2)" = "Lycium sp. 2",                                                      
                 "Ipomoea hederacea" = "Unk 41 (heart-shaped lvs, viney)",                                  
                 "Vulpia bromoides" = "Vulpia bromoides",   
                 "Brickellia sp." = "Aster shrub, deltoid lvs, erect infls (not dropping like ambrosia)",
                 "Acacia sp. (unarmed)" = "Unarmed Aacacia",                                                   
                 "Marina parryi" = "Marina parryi",                                                     
                 "Eriogonum sp." = "Eriogorum sp.",                                                     
                 "Poa sp. (perennial)" = "Unknown perennial grass",                                           
                 "Jacquemontia pringlei" = "Jacquemontia pringlei",                                             
                 "Muhlenbergia porteri" = "Muhlenbergia porteri",                                              
                 "Carnegiea gigantea" = "Carnegiea gigantea",                                                
                 "Krameria erecta" = "Krameria erecta",                                                   
                 "Ambrosia deltoidea" = "Ambrosia deltoidea",                                                
                 "Porophyllum gracile" = "Porophyllum gracile",                                               
                 "Lycium sp." = "Lycium sp.",                                                        
                 "Eriogonum wrightii" = "Eriogorum wrightii",                                                
                 "Abutiton abutiloides" = "Abutiton abutiloides",                                              
                 "Arceuthobium sp." = "Mistletoe",                                                         
                 "Euphorbiaceae sp." = "Forb - opposite lvs",                                               
                 "Euphorbiaceae sp." = "milky sap - Euphorbiacene",                                         
                 "Euphorbiaceae sp." = "erect chamaesyces",                                                 
                 "Asteraceae sp. (shrub)" = "Unk Asteraceae shrub",                                              
                 "Cylindropuntia bigelovii" = "Cylindropuntia bigelovli",                                          
                 "Lycium sp. (2)" = "Lycium sp 2",                                                       
                 "cf. Orobanche cooperi" = "cf. Oroborche cooperi",                                             
                 "Schrophulariaceae sp." = "Unknown dried up cf. Scrophulariaceae",                             
                 "Gutierrezia sarothrae" = "cf. Gutierezia sorothrae",                                          
                 "Xanthisma gracile" = "Xanthisima gracile",                                                
                 "Echinocereus triglochidiatus" = "Echinocerus triglo",                                                
                 "Arceuthobium sp." = "Mistletoe (on a palo verde)",                                       
                 "Bouteloua curtipendula" = "Bouteloua cardiophylla",                                            
                 "Cryptantha sp. (Unk 2)" = "Cryptontha sp. -> Unk 2",                                           
                 "cf. Bebbia juncea" = "cf. Bebbia juncea",                                                 
                 "Lycium parishii" = "Lycium porishii",                                                   
                 "Bothriochloa barbinodis" =  "Bothriochloa barbinodis",                                           
                 "Unknown forb" = "Unknown forb",                                                      
                 "Sphaeralcea ambigua" = "Sphaerelcia cf. ambigua",                                           
                 "Bouteloua curtipendula" = "Bouteloua curdipendula",                                            
                 "Machaeranthera bigelovii" = "Macharaerthera bigelovii",                                          
                 "Mammillaria microcarpa" = "Mammilaria microcarpa",                                             
                 "Erigeron divergens" = "Erigeron divergens",                                                
                 "Dalea albiflora" = "Unk shurb w pinrately - maybe compound dalea? albiflora leaves",    
                 "Gutierrezia sarothrae" = "Grutierezia sorothrae",                                             
                 "Amaranthus palmeri" = "Amaranthus palmeri",                                                
                 "Justicia longii" = "Justicia longii",                                                   
                 "Cylindropuntia versicolor" = "Staghorn cholla - Cylindropuntia versicolor",                       
                 "Mammillaria grahamii" = "Mammallari grahamii",                                               
                 "Jatropha cardiophylla" = "Red-barked shrub w/cottonwood-shaped lvs - Jatropha caridophylla",  
                 "Erodium cicutarium" = "cf. Erodium cicutarium",                                            
                 "Brassica nigra" =  "Unknown with beeked siliques (cf. Brassica nigra)",                 
                 "Aloysia wrightii" = "Mint/Borage/verbena bush - Aloysia wrightii" ,                      
                 "Machaeranthera bigelovii" = "Mocharaenthera bigelovii",                                          
                 "Ambrosia psilostachya" = "Ambrosia psilostachys",                                             
                 "Dasylirion wheeleri" = "Dasilerion wheeleri",                                               
                 "Ambrosia ambrosioides" = "Ambrosia abrosioides",                                              
                 "Agave schottii" = "cf. Agave schottii",                                                
                 "Acourtia wrightii" = "Acourtia (peresiza)",                                               
                 "Eriogonum wrightii" = "Eriogonum wrightii",                                                
                 "Sphaeralcea ambigua" = "Sphaerelcea ambigua",                                               
                 "Fern sp. (3)" = "Fern 3",                                                            
                 "Acacia sp. (unarmed)" = "Unarmed acacia",                                                    
                 "Tridens muticus" = "Tridens mutica",                                                    
                 "Lycium sp." = "Lycium sp. (same as RR_01)",                                        
                 "Fabaceae sp." = "Fab subshrub, purple flrs > to key",                                
                 "Brassicaceae sp." =  "Unk brassicaceae",                                                  
                 "Echinocereus triglochidiatus" = "Echinocereus triglo",                                               
                 "Asteraceae sp." = "Unkown aster",                                                      
                 "Unknown forb (perennial)" = "dried up perennial herb",                                           
                 "cf. Boechera sp." = "Unkown Brassicaceae w/drooping siliques",                           
                 "Centaurea melitensis" = "cf. centauria melitensis",                                          
                 "Brickellia sp." = "Brickellia sp.",                                                    
                 "Metastelma arizonicum" =  "Metastelma arizonicum",                                             
                 "Ephedra trifurca" = "Ephedra cf. trifurca",
                 "Fouquieria splendens" = "Foquiera splendens")

# lut is backwards!
lut_fixed <- names(lut_species)
names(lut_fixed) <- lut_species %>% as.character

div_input <- read_csv("DataPrep/Diversity/Diversity - Data.csv") %>%
  replace_na(list(subplot = "plant_walk", percent_cover = 0.01)) %>%
  mutate(unknown_status = NA,
         scientific_name_clean = lut_fixed[species_raw])

write_csv(div_input, "DataPrep/Diversity/output/diversity_cleaned_EF.csv")
write_csv(div_input, "Analysis/Diversity_a/diversity_cleaned_EF.csv")
 
# div_input[div_input$species_raw ==  "Bouteloua cardiophylla",]#$plot

